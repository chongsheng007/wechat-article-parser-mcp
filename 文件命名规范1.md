# 文件命名规范

## 📋 规范说明

为了避免 Cursor 打开文件时出现问题，所有文件命名必须遵循以下规范：

---

## ⚠️ 重要发现：真正的问题原因

经过深入分析，发现**问题不是文件名本身**，而是：

### 根本原因
**Cursor 对某些新创建的文件存在索引/缓存延迟问题**，特别是：
- 通过 AI 工具（如 `write`）新创建的文件
- 文件系统事件可能没有被正确监听
- Cursor 的文件索引没有及时更新

### 证据
- `作业提交说明.md`（纯中文，6字符）✅ **能打开** - 昨天创建，已存在索引中
- `文件命名规范.md`（纯中文，6字符）❌ **不能打开** - 今天新创建
- `文件命名规范1.md`（加数字后）✅ **能打开** - 重命名触发文件系统事件，重新索引

### 解决方案
1. **使用更新后的 `create_file.py` 工具**（已自动触发文件系统事件）
2. **如果创建后无法打开**：
   - 方法1：重命名文件（触发文件系统事件）
   - 方法2：重启 Cursor
   - 方法3：使用 `touch` 命令更新文件时间戳

---

## ✅ 允许使用的字符

### 必须使用
- **小写英文字母**：a-z
- **中文简体**：常用汉字
- **数字**：0-9
- **连字符**：-（用于分隔）
- **下划线**：_（用于分隔）
- **点号**：.（仅用于文件扩展名）

### 示例
```
✅ 正确：
- cursor三种模式使用指南.md
- 作业提交说明.md
- 项目开发计划.md
- api接口文档.md
- 测试文件001.md

❌ 错误：
- CURSOR_MODES_GUIDE.md（包含大写字母）
- Cursor指南.md（包含大写字母）
- 文件@说明.md（包含特殊符号）
- 文件#说明.md（包含特殊符号）
```

---

## 🔧 文件创建标准流程

### 方法 1：使用标准工具创建（推荐）

已创建 `create_file.py` 工具，已修复索引问题：

```bash
# 使用方法
python3 create_file.py "文件名.md" "文件内容"
```

**工具会自动**：
- 使用 UTF-8 编码
- 清理扩展属性（macOS）
- 设置正确的文件权限（644）
- **触发文件系统事件**（确保 Cursor 能索引）

### 方法 2：手动创建文件

如果手动创建文件，创建后执行：

```bash
# 1. 清理扩展属性
xattr -c 文件名.md

# 2. 设置权限
chmod 644 文件名.md

# 3. 触发文件系统事件（重要！）
touch 文件名.md

# 或者重启 Cursor
```

---

## 📝 命名建议

### 推荐格式

```
小写英文前缀 + 中文描述 + 扩展名

示例：
- cursor三种模式使用指南.md
- 项目开发文档.md
- api接口说明.md
- 数据库设计文档.md
```

**注意**：虽然纯中文文件名也可以，但如果遇到无法打开的问题，建议添加英文前缀。

### 避免使用

- ❌ 大写字母（A-Z）
- ❌ 特殊符号（@、#、$、%、&、*等）
- ❌ 空格（使用连字符或下划线代替）
- ❌ 只有大写英文（如：README.md）

---

## 🛠️ 如果文件无法打开

### 问题诊断

如果新创建的文件无法在 Cursor 中打开：

1. **检查文件是否存在**
   ```bash
   ls -la 文件名.md
   ```

2. **检查文件权限**
   ```bash
   chmod 644 文件名.md
   ```

3. **清理扩展属性**
   ```bash
   xattr -c 文件名.md
   ```

4. **触发文件系统事件**（最重要！）
   ```bash
   touch 文件名.md
   # 或者重命名文件再改回来
   mv 文件名.md 文件名_temp.md
   mv 文件名_temp.md 文件名.md
   ```

5. **重启 Cursor**
   - 完全退出（Cmd+Q）
   - 重新打开

---

## ✅ 检查清单

创建文件前检查：

- [ ] 文件名只包含小写字母、中文、数字、连字符、下划线
- [ ] 使用 UTF-8 编码
- [ ] 文件权限设置为 644
- [ ] 清理了扩展属性（macOS）
- [ ] **已触发文件系统事件**（使用 `touch` 或工具自动处理）

---

## 📌 重要提醒

1. **文件名本身不是问题**，纯中文文件名完全可以
2. **问题在于 Cursor 的索引机制**，需要触发文件系统事件
3. **使用更新后的 `create_file.py` 工具**可以自动处理
4. **如果手动创建**，记得执行 `touch` 命令

---

## 🔍 技术细节

### 为什么重命名能解决问题？

重命名文件会触发文件系统的 `RENAME` 事件，Cursor 的文件监听器会：
1. 检测到文件被重命名
2. 重新索引该文件
3. 更新内部文件列表

这也是为什么 `touch` 命令也能解决问题的原因。

---

**最后更新**: 2025年11月6日  
**问题根源**: Cursor 文件索引延迟，非文件名本身
